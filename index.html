<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ShopHaiDang - ChungMinhUyTin</title>
<style>
body{font-family:Arial;background:#111;color:#fff;text-align:center}
.box{background:#222;padding:15px;margin:15px;border-radius:10px}
input,button{padding:8px;margin:5px;border-radius:5px;border:none}
button{background:#0a84ff;color:#fff}
img{width:100%;max-width:280px;border-radius:10px}
.hidden{display:none}
</style>
</head>
<body>

<h2>ShopHaiDang - ChungMinhUyTin</h2>

<div id="auth" class="box">
  <button onclick="showLogin()">Đăng nhập</button>
  <button onclick="showRegister()">Đăng ký</button>
</div>

<div id="login" class="box hidden">
  <h3>Đăng nhập</h3>
  <input id="luser" placeholder="Tài khoản"><br>
  <input id="lpass" type="password" placeholder="Mật khẩu"><br>
  <button onclick="login()">Đăng nhập</button>
</div>

<div id="register" class="box hidden">
  <h3>Đăng ký</h3>
  <input id="ruser" placeholder="Tài khoản"><br>
  <input id="rpass" type="password" placeholder="Mật khẩu"><br>
  <button onclick="register()">Tạo tài khoản</button>
</div>

<div id="user" class="box hidden">
  <h3>Xin chào <span id="name"></span></h3>
  <p>Số dư: <b><span id="money"></span>đ</b></p>

  <h4>Nạp tiền</h4>
  <input id="nap" type="number" placeholder="Nhập số tiền">
  <button onclick="napTien()">Nạp</button>

  <br><br>
  <button onclick="logout()">Đăng xuất</button>
</div>

<div class="box">
  <h3>Acc Free Fire #1 - 260đ</h3>
  <img src="acc1.jpg">
  <button onclick="buy(260)">Mua acc</button>
</div>

<div class="box">
  <h3>Acc Free Fire #2 - 900đ</h3>
  <img src="acc2.jpg">
  <button onclick="buy(900)">Mua acc</button>
</div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || {};
let current = localStorage.getItem("current");

function save(){
  localStorage.setItem("users",JSON.stringify(users));
  localStorage.setItem("current",current);
}

function showLogin(){
  loginDiv.style.display="block";
  registerDiv.style.display="none";
}

function showRegister(){
  registerDiv.style.display="block";
  loginDiv.style.display="none";
}

function register(){
  let u=ruser.value,p=rpass.value;
  if(!u||!p) return alert("Nhập đủ thông tin");
  if(users[u]) return alert("Tài khoản tồn tại");
  users[u]={pass:p,money:0};
  save(); alert("Đăng ký thành công");
}

function login(){
  let u=luser.value,p=lpass.value;
  if(!users[u]||users[u].pass!=p) return alert("Sai tài khoản hoặc mật khẩu");
  current=u; save(); location.reload();
}

function logout(){
  current=""; save(); location.reload();
}

function napTien(){
  let t = parseInt(nap.value);
  if(!t || t<=0) return alert("Nhập số tiền hợp lệ");
  users[current].money += t;
  save(); update();
  alert("Nạp tiền thành công");
}

function buy(price){
  if(!current) return alert("Đăng nhập trước");
  if(users[current].money < price) return alert("Không đủ tiền");
  users[current].money -= price;
  save(); update();
  alert("Mua acc thành công");
}

function update(){
  if(current){
    auth.style.display="none";
    user.style.display="block";
    name.innerText=current;
    money.innerText=users[current].money;
  }
}

const auth=document.getElementById("auth");
const loginDiv=document.getElementById("login");
const registerDiv=document.getElementById("register");
const user=document.getElementById("user");

update();
</script>

</body>
</html>
